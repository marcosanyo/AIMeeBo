# ğŸ“ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è­°äº‹éŒ²ç”Ÿæˆã‚¢ãƒ—ãƒªã€ŒAI Meeting Boardã€ï¼ˆæ„›ç§°ï¼šAIMeeBoï¼‰

## ğŸ“Œ æ¦‚è¦

æœ¬ã‚¢ãƒ—ãƒªã¯ã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã¾ãŸã¯éŸ³å£°å…¥åŠ›ã‚’ãƒˆãƒªã‚¬ãƒ¼ã¨ã—ã¦ã€LLMï¼ˆVertex AI Geminiï¼‰ã‚’ç”¨ã„ã¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ä¼šè­°æƒ…å ±ï¼ˆã‚¿ã‚¹ã‚¯ã€å‚åŠ è€…ã€ãƒãƒ¼ãƒˆã€è­°é¡Œã€æ¦‚è¦å›³ï¼‰ã‚’ç”Ÿæˆãƒ»æ›´æ–°ã—ã€è¡¨ç¤ºã™ã‚‹Next.jsãƒ™ãƒ¼ã‚¹ã®ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**ã§ã™ã€‚Firebase Realtime Database ã‚’æ´»ç”¨ã—ãŸSPAï¼ˆSingle Page Applicationï¼‰ã¨ã—ã¦æ§‹ç¯‰ã•ã‚Œã¦ãŠã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã¨ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã“ã ã‚ã£ã¦ã„ã¾ã™ã€‚æ„›ç§°ã®ã€ŒAIMeeBoã€ã¯ã€Œã‚ã„ã¿ãƒ¼ã¼ã€ã¨èª­ã¿ã¾ã™ã€‚

ã€Œä»Šæ—¥ã®ä¼šè­°ã®è­°äº‹éŒ²ã€èª°ãŒæ›¸ãï¼Ÿã€ã€Œã‚ã®ã‚¿ã‚¹ã‚¯ã€èª°ãŒæ‹…å½“ã™ã‚‹ã‚“ã ã£ã‘ï¼Ÿã€ã€Œè­°è«–ã«é›†ä¸­ã—ãŸã„ã®ã«ã€ãƒ¡ãƒ¢ã‚’å–ã‚‹ã®ã«å¿…æ­»ã§è©±ãŒé ­ã«å…¥ã£ã¦ã“ãªã„â€¦ã€ã¨ã„ã£ãŸä¼šè­°ã®ã€Œè¦‹ãˆãªã„ã‚³ã‚¹ãƒˆã€ã‚’ã€AIã®åŠ›ã§è§£æ¶ˆã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚

æ–°è¦ãƒ«ãƒ¼ãƒ ä½œæˆæ™‚ã«ã¯ã€Firebase Realtime Database ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ `template` ã¨ã„ã†åå‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ã‚’åŸºã«ä½œæˆã•ã‚Œã¾ã™ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯Python (FastAPI) ã§æ§‹ç¯‰ã•ã‚Œã€ä¸­å¤®ã®ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼LLMãŒå°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆLLMç¾¤ï¼ˆã‚¿ã‚¹ã‚¯ç®¡ç†ã€å‚åŠ è€…ç®¡ç†ã€ãƒãƒ¼ãƒˆç”Ÿæˆã€ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ç®¡ç†ã€æ¦‚è¦å›³ç”Ÿæˆï¼‰ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚


## ğŸ¯ ç›®çš„

*   è¤‡æ•°äººã®ä¼šè­°ã«ãŠã‘ã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªæƒ…å ±ç®¡ç†ï¼ˆã‚¿ã‚¹ã‚¯ã€å‚åŠ è€…ã€ãƒãƒ¼ãƒˆã€è­°é¡Œã€æ¦‚è¦å›³ï¼‰ã€‚
*   ä¼šè­°ã®ã€Œè¦‹ãˆãªã„ã‚³ã‚¹ãƒˆã€ï¼ˆè­°äº‹éŒ²ä½œæˆã€ã‚¿ã‚¹ã‚¯ç®¡ç†ã€æƒ…å ±æ•´ç†ãªã©ï¼‰ã‚’å‰Šæ¸›ã—ã€å‚åŠ è€…ãŒè­°è«–ã«é›†ä¸­ã§ãã‚‹ç’°å¢ƒã®æä¾›ã€‚
*   LLMã«ã‚ˆã‚‹æ–‡è„ˆç†è§£ã«åŸºã¥ã„ãŸæŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ›´æ–°ã€‚
*   ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼LLMã«ã‚ˆã‚‹é©åˆ‡ãªå°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®å‡¦ç†å§”è­²ã€‚
*   **Firebase Realtime Databaseã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã¨ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚‹ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§åŠ¹ç‡çš„ãªé‹ç”¨ã€‚**
*   Next.jsã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ UIè¡¨ç¤ºã€‚
*   Vertex AI (Gemini) ã¨ Firebase ã‚’çµ„ã¿åˆã‚ã›ãŸã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®å®Ÿç¾ã€‚

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
![AIMeeBoã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](docs/AIMeeBoã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£.png)


```
[Next.js Frontend (React UI)]
       â”‚ (ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› + ä¼šè©±å±¥æ­´)
       â”‚
       â–¼ REST API (/invoke)
[FastAPI Backend (meeting-mate-app/server/)]
       â”‚ (main.py: APIãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€èµ·å‹•å‡¦ç†)
       â”‚
       â”‚ â—„â”€â”€ [API Key Manager (Firebase Realtime Database)]
       â”‚      (room_secrets/{roomId}: æš—å·åŒ–ã•ã‚ŒãŸAPIã‚­ãƒ¼ã‚’å®‰å…¨ã«ç®¡ç†)
       â”‚
       â–¼ [Orchestrator LLM (main.py å†… dispatch_to_agent)]
       â”‚    (ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã€ä¼šè©±å±¥æ­´ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿æ¦‚è¦ã‚’åˆ†æã—ã€
       â”‚     å‘¼ã³å‡ºã™ã¹ãå°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨æŒ‡ç¤ºã‚’æ±ºå®š)
       â”‚
       â”œâ”€æŒ‡ç¤ºâ”€â–º [Task Management Agent (agents/task_agent.py)]
       â”‚          (LLMãŒã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚’æ›´æ–° â†’ Firebase "tasks" ã‚’æ›´æ–°)
       â”‚
       â”œâ”€æŒ‡ç¤ºâ”€â–º [Notes Generator Agent (agents/notes_agent.py)]
       â”‚          (LLMãŒãƒãƒ¼ãƒˆé …ç›®ã‚’æ›´æ–° â†’ Firebase "notes" ã‚’æ›´æ–°)
       â”‚
       â”œâ”€æŒ‡ç¤ºâ”€â–º [Agenda Management Agent (agents/agenda_agent.py)]
       â”‚          (LLMãŒè­°é¡Œã‚’æ¨å®š â†’ Firebase "currentAgenda", "suggestedNextTopics" ã‚’æ›´æ–°)
       â”‚
       â””â”€æŒ‡ç¤ºâ”€â–º [Overview Diagram Agent (agents/overview_diagram_agent.py)]
                  (LLMãŒæ¦‚è¦å›³ã‚’æ›´æ–° â†’ Firebase "overviewDiagram" ã‚’æ›´æ–°)

[Firebase Realtime Database (ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢)]
â”œâ”€ rooms/{roomId}/          â† ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã®æ ¸)
â”‚  â”œâ”€ participants/
â”‚  â”œâ”€ tasks/
â”‚  â”œâ”€ notes/
â”‚  â””â”€ transcript/
â””â”€ room_secrets/{roomId}/   â† ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
   â”œâ”€ encrypted_api_key
   â”œâ”€ expires_at
   â””â”€ created_by
```
[Firebase Realtime Database (ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢)]
(models.py: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾© - Pydanticãƒ¢ãƒ‡ãƒ«)
(config.py: è¨­å®šã€Vertex AIåˆæœŸåŒ–ã€ãƒ­ã‚¬ãƒ¼)
(Firebase Admin SDK: Firebase Realtime Databaseã¸ã®ã‚¢ã‚¯ã‚»ã‚¹)


*   **Next.js Frontend**: `meeting-mate-app/src/app/room/page.tsx` ã§å®Ÿè£…ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æä¾›ã—ã€å…¥åŠ›ã•ã‚ŒãŸæœ€æ–°ç™ºè¨€1ä»¶ã‚’ `LLMMessage` å½¢å¼ã§FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ä¿¡ã€‚**Firebase Realtime Databaseã¨ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã«ã‚ˆã‚Šã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®æ›´æ–°ã‚’å³åº§ã«UIã«åæ˜ ã—ã¾ã™ã€‚**
*   **FastAPI Backend**: `meeting-mate-app/server/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã§å®Ÿè£…ã€‚
    *   `main.py`: FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã€‚APIãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼é–¢æ•°ã®ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•å‡¦ç†ã€‚
    *   `agents/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª: å„å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ã‚’æ ¼ç´ã€‚
        *   `task_agent.py`: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚
        *   `participant_agent.py`: å‚åŠ è€…ç®¡ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚
        *   `notes_agent.py`: ãƒãƒ¼ãƒˆç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚
        *   `agenda_agent.py`: ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ç®¡ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚
        *   `overview_diagram_agent.py`: æ¦‚è¦å›³ç”Ÿæˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€‚
    *   `models.py`: Pydanticãƒ¢ãƒ‡ãƒ«å®šç¾©ï¼ˆ`LLMMessage`, `DBTranscriptEntry` ãªã©ï¼‰ã€‚
    *   `config.py`: è¨­å®šå¤‰æ•°ã€ãƒ­ã‚¬ãƒ¼ã€Vertex AIåˆæœŸåŒ–ãªã©ã€‚
    *   `main.py` å†…ã§ Firebase Admin SDK ã‚’ä½¿ç”¨ã—ã¦ Firebase Realtime Database ã¨ã®ãƒ‡ãƒ¼ã‚¿é€å—ä¿¡ã‚’å‡¦ç†ã€‚
    ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ä»˜ã‘ã€ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼LLMã‚’ä»‹ã—ã¦å„ç¨®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã€Firebase Realtime Database ã‚’æ›´æ–°ã€‚æ›´æ–°çµæœã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«è¿”ã™ã€‚

---

## ğŸ§  ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. ãƒ¡ã‚¤ãƒ³å‡¦ç† (`meeting-mate-app/server/main.py`)
*   **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ (`POST /invoke`)**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€æ–°ç™ºè¨€ã¨ä¼šè©±å±¥æ­´ã‚’å«ã‚€ï¼‰ã‚’å—ã‘ä»˜ã‘ã¾ã™ã€‚
*   **ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼LLM (`orchestrate_agents` é–¢æ•°)**:
    *   **å½¹å‰²**: å—ä¿¡ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ç™ºè¨€ï¼ˆDBã‹ã‚‰å–å¾—ã—ãŸãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’LLMMessageå½¢å¼ã«å¤‰æ›ã—ãŸã‚‚ã®ï¼‰ã€ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¿ã‚¹ã‚¯ã€å‚åŠ è€…ã€ãƒãƒ¼ãƒˆã€è­°é¡Œã€æ¦‚è¦å›³ã®æ¦‚è¦ï¼‰ã‚’åˆ†æã—ã€ã©ã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã©ã®ã‚ˆã†ãªå‡¦ç†ã‚’ä¾é ¼ã™ã‚‹ã‹ã‚’LLMï¼ˆVertex AIï¼‰ã«åˆ¤æ–­ã•ã›ã¾ã™ã€‚
    *   **å…¥åŠ›**:
        *   DBã‹ã‚‰å–å¾—ãƒ»å¤‰æ›ã•ã‚ŒãŸãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆå±¥æ­´ (`LLMMessage` ã®ãƒªã‚¹ãƒˆ)ã€‚
        *   ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã®æ¦‚è¦ (Firebase Realtime Database ã‹ã‚‰å–å¾—)ã€‚
    *   **LLMã¸ã®æŒ‡ç¤º**: ä¸Šè¨˜å…¥åŠ›ã«åŸºã¥ãã€å‘¼ã³å‡ºã™ã¹ãå°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆ`TaskManagementAgent`, `NotesGeneratorAgent`, `AgendaManagementAgent`, `OverviewDiagramAgent`ï¼‰ã¨ã€å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ç°¡å˜ãªæŒ‡ç¤ºã‚’ **`[{"agent_name": "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå", "instruction": "å…·ä½“çš„ãªæŒ‡ç¤ºå†…å®¹"}]`** ã¨ã„ã†JSONå½¢å¼ã®ãƒªã‚¹ãƒˆã§è¿”ã™ã‚ˆã†æŒ‡ç¤ºã—ã¾ã™ã€‚
    *   **å‡ºåŠ›**: ãƒ‘ãƒ¼ã‚¹ã•ã‚ŒãŸLLMã®æŒ‡ç¤ºã«åŸºã¥ãã€å¯¾å¿œã™ã‚‹å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ï¼ˆå„`agents/*.py`ãƒ•ã‚¡ã‚¤ãƒ«å†…ï¼‰ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚
*   **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•ã¨è¨­å®š**: FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–ã€CORSè¨­å®šã€Firebase Admin SDK ãŠã‚ˆã³ Vertex AI ã®åˆæœŸåŒ–å‘¼ã³å‡ºã—ãªã©ã€‚

### 2. å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç¾¤ (`meeting-mate-app/server/agents/` å†…)
å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã® `execute` ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼LLMã‹ã‚‰ã®æŒ‡ç¤ºã¨é–¢é€£æƒ…å ±ã‚’åŸºã«ã€ãã‚Œãã‚Œã®å°‚é–€é ˜åŸŸã®ãƒ‡ãƒ¼ã‚¿ã‚’LLMï¼ˆVertex AIï¼‰ã‚’ä½¿ã£ã¦æ›´æ–°ã—ã€æ›´æ–°å¾Œã®ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã¯ Firebase Realtime Database ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

*   **ã‚¿ã‚¹ã‚¯ç®¡ç† (`agents/task_agent.py`)**:
    *   LLMãŒã€æŒ‡ç¤ºã€ä¼šè©±å±¥æ­´ã€ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚’è€ƒæ…®ã—ã¦ã€Firebase Realtime Database å†…ã® `tasks` ã‚’æ›´æ–°ã—ã¾ã™ã€‚
*   **å‚åŠ è€…ç®¡ç† (`agents/participant_agent.py`)**:
    *   LLMãŒã€æŒ‡ç¤ºã€ä¼šè©±å±¥æ­´ã€ç¾åœ¨ã®å‚åŠ è€…ãƒªã‚¹ãƒˆã‚’è€ƒæ…®ã—ã¦ã€Firebase Realtime Database å†…ã® `participants` ã‚’æ›´æ–°ã—ã¾ã™ã€‚
    *   ç¾åœ¨ã¯ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã«ã™ã‚‹ãŸã‚æ©Ÿèƒ½ç„¡åŠ¹åŒ–ä¸­
*   **ãƒãƒ¼ãƒˆç”Ÿæˆ (`agents/notes_agent.py`)**:
    *   LLMãŒã€æŒ‡ç¤ºã€ä¼šè©±å±¥æ­´ã€ç¾åœ¨ã®ãƒãƒ¼ãƒˆé …ç›®ãƒªã‚¹ãƒˆã‚’è€ƒæ…®ã—ã¦ã€Firebase Realtime Database å†…ã® `notes` ã‚’æ›´æ–°ã—ã¾ã™ã€‚
*   **ã‚¢ã‚¸ã‚§ãƒ³ãƒ€ç®¡ç† (`agents/agenda_agent.py`)**:
    *   LLMãŒã€æŒ‡ç¤ºã€ä¼šè©±å±¥æ­´ã€ç¾åœ¨ã®è­°é¡Œæƒ…å ±ã‚’è€ƒæ…®ã—ã¦ã€Firebase Realtime Database å†…ã® `currentAgenda` ãŠã‚ˆã³ `suggestedNextTopics` ã‚’æ›´æ–°ã—ã¾ã™ã€‚
*   **æ¦‚è¦å›³ç”Ÿæˆ (`agents/overview_diagram_agent.py`)**:
    *   LLMãŒã€æŒ‡ç¤ºã€ä¼šè©±å±¥æ­´ã€ç¾åœ¨ã®æ¦‚è¦å›³æƒ…å ±ã‚’è€ƒæ…®ã—ã¦ã€Firebase Realtime Database å†…ã® `overviewDiagram` ã‚’æ›´æ–°ã—ã¾ã™ã€‚

### 3. ãã®ä»–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (`meeting-mate-app/server/` å†…)
*   **`models.py`**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã•ã‚Œã‚‹Pydanticãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆ`LLMMessage`, `DBTranscriptEntry`, ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã€ã‚¿ã‚¹ã‚¯æ§‹é€ ãªã©ï¼‰ã‚’å®šç¾©ã—ã¾ã™ã€‚
*   **`config.py`**: ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ã®è¨­å®šèª­ã¿è¾¼ã¿ã€Vertex AIã®åˆæœŸåŒ–å‡¦ç†ã€ãƒ­ã‚¬ãƒ¼ã®è¨­å®šãªã©ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã®è¨­å®šé–¢é€£ã®ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã—ã¾ã™ã€‚
*   **`file_utils.py`**: (ç¾åœ¨ã¯ä¸»ã«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ç­‰ã«ä½¿ç”¨ã€‚DBæ“ä½œã¯ `main.py` å†…ã§ Firebase Admin SDK ã‚’ç›´æ¥ä½¿ç”¨)

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢

*   **Firebase Realtime Database**: ä¸»è¦ãªãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚
    *   **ç›®çš„**: **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã«ã‚ˆã‚‹å³æ™‚æ€§ã€ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã®é«˜ã„è¦ªå’Œæ€§ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã®å‘ä¸Šã€‚**
    *   **ã‚¹ã‚­ãƒ¼ãƒ**: [Firebase Realtime Database ã‚¹ã‚­ãƒ¼ãƒæ¡ˆ](#firebase-realtime-database-ã‚¹ã‚­ãƒ¼ãƒæ¡ˆ) ã‚’å‚ç…§ã€‚
        *   **ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `rooms/{roomId}/transcript` ã«ã¯ã€`DBTranscriptEntry` ã‚¹ã‚­ãƒ¼ãƒ (`{"text": string, "user": string (ç™ºè¨€è€…å), "timestamp": string}`) ã®é…åˆ—ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚
    *   **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: Cloud Runã®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã®ã¿ã‚’è¨±å¯ã™ã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã—ã¾ã™ã€‚ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®ç›´æ¥çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹èª­ã¿æ›¸ãã¯ç¦æ­¢ã—ã€ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿æ“ä½œã¯FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµŒç”±ã§è¡Œã„ã¾ã™ã€‚

---

## â˜ï¸ ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ä»¥ä¸‹ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§Google Cloud Platformä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚**Firebaseã‚µãƒ¼ãƒ“ã‚¹ã¨Cloud Runã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ãªã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚**

### API ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

**Firebase Hosting + Cloud Run çµ±åˆãƒ¢ãƒ¼ãƒ‰** ã‚’æ¡ç”¨ã—ã¦ãŠã‚Šã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®APIå‘¼ã³å‡ºã—ã¯ã™ã¹ã¦ç›¸å¯¾URLã§è¡Œã‚ã‚Œã€ç’°å¢ƒã«å¿œã˜ã¦é©åˆ‡ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚

#### æœ¬ç•ªç’°å¢ƒ (Firebase Hosting)
```
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /invoke â†’ Firebase Hosting Rewrites â†’ Cloud Run FastAPI
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /join_room â†’ Firebase Hosting Rewrites â†’ Cloud Run FastAPI
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /create_room â†’ Firebase Hosting Rewrites â†’ Cloud Run FastAPI
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /approve_join_request â†’ Firebase Hosting Rewrites â†’ Cloud Run FastAPI
```

#### é–‹ç™ºç’°å¢ƒ (Next.js Dev Server)
```
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /invoke â†’ Next.js Dev Proxy â†’ localhost:8000 FastAPI
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /join_room â†’ Next.js Dev Proxy â†’ localhost:8000 FastAPI
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /create_room â†’ Next.js Dev Proxy â†’ localhost:8000 FastAPI
ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ â†’ /approve_join_request â†’ Next.js Dev Proxy â†’ localhost:8000 FastAPI
```

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Š:
- **ç’°å¢ƒå¤‰æ•°ã§ã®ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰URLæŒ‡å®šãŒä¸è¦**
- **æœ¬ç•ªç’°å¢ƒã§Firebase Hostingã¨Cloud Runã®çµ±åˆãƒ¡ãƒªãƒƒãƒˆã‚’æœ€å¤§åŒ–**
- **é–‹ç™ºç’°å¢ƒã§ãƒ­ãƒ¼ã‚«ãƒ«FastAPIã‚µãƒ¼ãƒãƒ¼ã¨ã®ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ãªé€£æº**
- **ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®è¨­å®šå¤‰æ›´ãŒä¸è¦**

*   **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é™çš„ã‚µã‚¤ãƒˆã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (`next export`) ã—ã€Firebase Hostingã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚`/room/[roomId]`ã®ã‚ˆã†ãªå‹•çš„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ãƒšãƒ¼ã‚¸ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° (CSR) ã‚’åˆ©ç”¨ã—ã€Firebase Realtime Databaseã‹ã‚‰ç›´æ¥ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚**Firebase Realtime Databaseã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼ã«ã‚ˆã‚Šã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãŒå³åº§ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«åæ˜ ã•ã‚Œã¾ã™ã€‚**
*   **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã—ã€Google Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®èª²é‡‘ã§é‹ç”¨ã™ã‚‹**ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã‚µãƒ¼ãƒ“ã‚¹**ã§ã™ã€‚
*   **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Firebase Realtime Databaseã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¯[ã“ã¡ã‚‰](#firebase-realtime-database-ã‚¹ã‚­ãƒ¼ãƒæ¡ˆ)ã‚’å‚ç…§ã€‚
*   **AI**:å¼•ãç¶šãVertex AIã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
*   **CI/CD**: Cloud Buildã‚’åˆ©ç”¨ã—ã¦ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›´ã‚’ãƒˆãƒªã‚¬ãƒ¼ã«è‡ªå‹•ã§ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã„ã¾ã™ï¼ˆäºˆå®šï¼‰ã€‚
*   **Secrets Management**: APIã‚­ãƒ¼ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±ãªã©ã®æ©Ÿå¯†æƒ…å ±ã¯Secret Managerã§ç®¡ç†ã—ã€Cloud Runã‹ã‚‰å®‰å…¨ã«å‚ç…§ã—ã¾ã™ï¼ˆäºˆå®šï¼‰ã€‚
*   **ã‚¤ãƒ³ãƒ•ãƒ©ç®¡ç†**: Terraformã‚’ä½¿ç”¨ã—ã¦ã€ä¸Šè¨˜ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚³ãƒ¼ãƒ‰ã§ç®¡ç†ã—ã¾ã™ã€‚æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ `environments/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã¾ã™ã€‚

### Firebase Realtime Database å½“åˆã‚¹ã‚­ãƒ¼ãƒæ¡ˆ
```json
{
  "rooms": {
    "room_id_1": {
      "sessionId": "session-12345",
      "roomName": "æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¼šè­°",
      "meetingSubtitle": "ã‚­ãƒƒã‚¯ã‚ªãƒ•ã¨åˆæœŸè¨ˆç”»",
      "sessionTitle": "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚­ãƒƒã‚¯ã‚ªãƒ•ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°",
      "startTime": "2024-05-20T10:00:00Z",
      "ownerId": "owner_uid_123",
      "participants": {
        "user_uid_1": {
          "name": "ç”°ä¸­",
          "role": "å‚åŠ è€…",
          "joinedAt": "2024-05-20T10:00:00Z"
        }
      },
      "tasks": {
        "task_id_1": {
          "id": "task_id_1",
          "title": "APIä»•æ§˜æ›¸ã®ä½œæˆ",
          "status": "æœªç€æ‰‹",
          "detail": "RESTful APIã®è¨­è¨ˆæ›¸ã‚’ä½œæˆã™ã‚‹"
        }
      },
      "notes": {
        "note_id_1": {
          "id": "note_id_1",
          "type": "decision",
          "title": "æ¡ç”¨æŠ€è¡“ã®æ±ºå®š",
          "detail": "Next.js + FastAPIæ§‹æˆã§æ±ºå®š"
        }
      },
      "overviewDiagram": {
        "title": "ä¼šè­°ã®æ¦‚è¦å›³",
        "mermaidDefinition": "graph TD;\nA[ä¼šè­°é–‹å§‹] --> B(è­°é¡Œ1);\nB --> C{è­°è«–};\nC --> D[æ±ºå®šäº‹é …];"
      },
      "currentAgenda": {
        "mainTopic": "æ¬¡æœŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨ˆç”»",
        "details": [
          {"id": "detail_1", "text": "ç¾çŠ¶ã®èª²é¡Œæ•´ç†"},
          {"id": "detail_2", "text": "æ–°æ©Ÿèƒ½ã®ææ¡ˆ"}
        ]
      },
      "suggestedNextTopics": ["äºˆç®—ç­–å®š", "ãƒªã‚½ãƒ¼ã‚¹ç¢ºä¿"],
      "transcript": [
        {
          "text": "æœ€åˆã®ç™ºè¨€ã§ã™ã€‚",
          "user": "ç”°ä¸­",
          "timestamp": "2024-05-20T10:00:00Z"
        }
      ],
      "last_llm_processed_message_count": 0
    }
  },
  "room_secrets": {
    "room_id_1": {
      "encrypted_api_key": "gAAAAABh...(æš—å·åŒ–ã•ã‚ŒãŸAPIã‚­ãƒ¼)",
      "expires_at": "2024-05-21T10:00:00Z",
      "created_at": "2024-05-20T10:00:00Z",
      "created_by": "owner_uid_123",
      "llm_models": ["gemini-2.5-flash"]
    }
  }
}
```

### Firebase Realtime Database ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«
```json
{
  "rules": {
    "rooms": {
      "$roomId": {
        ".read": "auth != null && root.child('rooms').child($roomId).child('participants').hasChild(auth.uid)",
        ".write": false
      }
    },
    "room_secrets": {
      ".read": false,
      ".write": false
    }
  }
}
```

## ğŸ” å‡¦ç†ãƒ•ãƒ­ãƒ¼è©³ç´°

1.  **éŸ³å£°èªè­˜ãƒ»ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UI (`room/page.tsx`) ã®å…¥åŠ›ã‚¨ãƒªã‚¢ã‹ã‚‰ç™ºè¨€ã‚’å…¥åŠ›ã—ã¾ã™ã€‚ãƒ¡ã‚¤ãƒ³ã¯éŸ³å£°èªè­˜ã§ã€ã‚µãƒ–æ©Ÿèƒ½ã¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚’ä½ç½®ã¥ã‘ã¦ã„ã¾ã™ã€‚
2.  **APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ã€å…¥åŠ›ã•ã‚ŒãŸæœ€æ–°ç™ºè¨€1ä»¶ã‚’ `LLMMessage` å½¢å¼ (`{"role": "user", "parts": [{"text": "..."}]}`) ã§ `callBackendApi` é–¢æ•°ã‚’ä»‹ã—ã¦FastAPIã‚µãƒ¼ãƒãƒ¼ã® `/invoke` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«é€ä¿¡ã—ã¾ã™ã€‚ã“ã®éš›ã€`roomId` ã¨ `speakerName` ã‚‚é€ä¿¡ã•ã‚Œã¾ã™ã€‚
3.  **ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¿å­˜**: FastAPIã‚µãƒ¼ãƒãƒ¼ (`main.py` ã® `/invoke` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ) ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã€ã¾ãšé€ä¿¡ã•ã‚ŒãŸæœ€æ–°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ `DBTranscriptEntry` å½¢å¼ (`{"text": string, "user": string, "timestamp": string}`) ã«å¤‰æ›ã—ã€Firebase Realtime Database ã®è©²å½“ãƒ«ãƒ¼ãƒ ã® `transcript` é…åˆ—ã«è¿½è¨˜ã—ã¾ã™ã€‚
4.  **ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼å‡¦ç†**:
    *   `LLM_TRIGGER_MESSAGE_COUNT` ã®æ¡ä»¶ã‚’æº€ãŸã—ãŸå ´åˆã€ã¾ãŸã¯éŸ³å£°èªè­˜ã®æœ€çµ‚çµæœãŒå¾—ã‚‰ã‚ŒãŸå ´åˆã«ã€`orchestrate_agents` é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¾ã™ã€‚
    *   `orchestrate_agents` ã¯ã€Firebase Realtime Database ã‹ã‚‰ç¾åœ¨ã®ãƒ«ãƒ¼ãƒ ã®å…¨ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆ`DBTranscriptEntry` ã®ãƒªã‚¹ãƒˆï¼‰ã¨ãã®ä»–ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚¿ã‚¹ã‚¯ã€å‚åŠ è€…ãªã©ï¼‰ã‚’å–å¾—ã—ã¾ã™ã€‚
    *   DBã‹ã‚‰å–å¾—ã—ãŸãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’LLMå‡¦ç†ç”¨ã® `LLMMessage` å½¢å¼ã®ãƒªã‚¹ãƒˆã«å¤‰æ›ã—ã¾ã™ã€‚
    *   LLMï¼ˆVertex AIï¼‰ã«ã€å¤‰æ›å¾Œã®ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆå±¥æ­´ã¨ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¦‚è¦ã‚’æ¸¡ã—ã€ã©ã®å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã™ã¹ãã‹ã€ãã®æŒ‡ç¤ºå†…å®¹ã®åˆ¤æ–­ã‚’ä¾é ¼ã—ã¾ã™ï¼ˆæœŸå¾…ã™ã‚‹å¿œç­”å½¢å¼ã¯ `[{"agent_name": "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå", "instruction": "å…·ä½“çš„ãªæŒ‡ç¤ºå†…å®¹"}]`ï¼‰ã€‚
5.  **å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ (ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯)**:
    *   ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼ã¯LLMã®åˆ¤æ–­çµæœã«åŸºã¥ãã€è©²å½“ã™ã‚‹å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã® `execute` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ã€LLMãŒç”Ÿæˆã—ãŸæŒ‡ç¤ºã¨å…±ã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¹ã‚¯ã¨ã—ã¦å‘¼ã³å‡ºã—ã¾ã™ã€‚
    *   å„å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€å†åº¦LLMï¼ˆVertex AIï¼‰ã‚’å‘¼ã³å‡ºã—ã€ä¸ãˆã‚‰ã‚ŒãŸæŒ‡ç¤ºã€ä¼šè©±å±¥æ­´ï¼ˆ`LLMMessage` å½¢å¼ï¼‰ã€é–¢é€£ã™ã‚‹ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆä¾‹: ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆï¼‰ã‚’åŸºã«ã€ãƒ‡ãƒ¼ã‚¿ã®å…·ä½“çš„ãªæ›´æ–°å†…å®¹ï¼ˆä¾‹: æ›´æ–°å¾Œã®ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆå…¨ä½“ï¼‰ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç”Ÿæˆã•ã›ã¾ã™ã€‚
6.  **ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã¨UIãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**:
    *   å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€LLMãŒç”Ÿæˆã—ãŸæ›´æ–°ãƒ‡ãƒ¼ã‚¿ã§ Firebase Realtime Database ã®å¯¾å¿œéƒ¨åˆ†ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚
    *   **Firebase Realtime Databaseã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸæ©Ÿèƒ½ã«ã‚ˆã‚Šã€ãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã‚‹ã¨å³åº§ã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®UIãŒè‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚**
    *   `/invoke` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ã€èµ·å‹•ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒªã‚¹ãƒˆã‚„ã€DBã‹ã‚‰å†å–å¾—ã—ãŸæœ€æ–°ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆä¾‹: `updatedTasks`, `updatedParticipants` ãªã©ï¼‰ã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«è¿”ã—ã¾ã™ã€‚
7.  **UIæ›´æ–°**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®å¿œç­”ã‚’å—ã‘å–ã‚Šã€å¯¾å¿œã™ã‚‹Reactã®stateï¼ˆ`tasks`, `participants`, `notes`, `currentAgenda`, `overviewDiagram` ãªã©ï¼‰ã‚’æ›´æ–°ã—ã€UIãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚æ›´æ–°ãŒã‚ã£ãŸãƒ‘ãƒãƒ«ã®ã¿ãŒãƒ›ãƒ¯ã‚¤ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒé©ç”¨ã•ã‚Œã¾ã™ãŒã€æŠ€è¡“çš„ã«å›°é›£ãªå ´åˆã¯ã“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã¯å‰Šé™¤ã•ã‚Œã¾ã™ã€‚

### 1. éƒ¨å±‹ä½œæˆãƒ•ãƒ­ãƒ¼
1. **éƒ¨å±‹ä½œæˆè€…**ãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§éƒ¨å±‹ä½œæˆï¼ˆãƒ«ãƒ¼ãƒ åã€ä¼šè­°ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã€APIã‚­ãƒ¼ã€LLMãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠï¼‰
2. **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**ãŒéƒ¨å±‹æƒ…å ±ã‚’Firebase `rooms/{roomId}` ã«ä¿å­˜ï¼ˆFirebase Realtime Databaseã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ  `template` ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦åˆæœŸåŒ–ï¼‰
3. **APIã‚­ãƒ¼ç®¡ç†**ãŒæä¾›ã•ã‚ŒãŸAPIã‚­ãƒ¼ã‚’æš—å·åŒ–ã— `room_secrets/{roomId}` ã«ä¿å­˜
4. **LLMãƒ¢ãƒ‡ãƒ«æƒ…å ±**ãŒé¸æŠã•ã‚ŒãŸLLMãƒ¢ãƒ‡ãƒ«ãƒªã‚¹ãƒˆã‚’ `room_secrets/{roomId}` ã«ä¿å­˜ï¼ˆæš—å·åŒ–ä¸è¦ï¼‰
5. **éƒ¨å±‹URL**ã‚’ä½œæˆè€…ã«è¿”å´

### 2. å‚åŠ è€…å‚åŠ ãƒ•ãƒ­ãƒ¼
1. **å‚åŠ è€…**ãŒéƒ¨å±‹URLã«ã‚¢ã‚¯ã‚»ã‚¹
2. **èªè¨¼ç¢ºèª**å¾Œã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã® `/join_room` ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã€éƒ¨å±‹ã® `participants` ãƒªã‚¹ãƒˆã«ç›´æ¥è¿½åŠ ã•ã‚Œã¾ã™ã€‚
3. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**ãŒ `rooms/{roomId}` ã®èª­ã¿å–ã‚Šæ¨©é™ã‚’å–å¾—
4. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**é–‹å§‹

### 3. LLMå‡¦ç†ãƒ•ãƒ­ãƒ¼
1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›**: å‚åŠ è€…ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ï¼ˆéŸ³å£°å…¥åŠ›ã‚‚å¯èƒ½ï¼‰
2. **ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¿å­˜**: Firebase `rooms/{roomId}/transcript` ã«è¿½è¨˜
3. **LLMå‡¦ç†ãƒˆãƒªã‚¬ãƒ¼**: æŒ‡å®šä»¶æ•°ã«é”ã—ãŸã‚‰ `orchestrate_agents` å®Ÿè¡Œ
4. **APIã‚­ãƒ¼å–å¾—**: `room_secrets/{roomId}` ã‹ã‚‰æš—å·åŒ–APIã‚­ãƒ¼ã‚’å¾©å·åŒ–
5. **LLMãƒ¢ãƒ‡ãƒ«å–å¾—**: `room_secrets/{roomId}` ã‹ã‚‰é¸æŠã•ã‚ŒãŸLLMãƒ¢ãƒ‡ãƒ«ãƒªã‚¹ãƒˆã‚’å–å¾—
6. **ãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒãƒ£ãƒ¼å®Ÿè¡Œ**: å–å¾—ã—ãŸAPIã‚­ãƒ¼ã¨é¸æŠã•ã‚ŒãŸLLMãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ã¦Vertex AIå‘¼ã³å‡ºã—
7. **å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ**: å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒåŒã˜APIã‚­ãƒ¼ã¨LLMãƒ¢ãƒ‡ãƒ«ã§LLMå‡¦ç†
8. **ãƒ‡ãƒ¼ã‚¿æ›´æ–°**: Firebase `rooms/{roomId}/` ã®å„ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
9. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ›´æ–°**: **Firebase Realtime Databaseã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸæ©Ÿèƒ½ã«ã‚ˆã‚Šã€UIãŒè‡ªå‹•çš„ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚**

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: `rooms/{roomId}` ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Firebase Admin SDKã§å…¨ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- **APIã‚­ãƒ¼**: `room_secrets/` ã¯å®Œå…¨ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å°‚ç”¨

### æš—å·åŒ–
- **APIã‚­ãƒ¼**: Fernetæš—å·åŒ–ã§å¯é€†æš—å·åŒ–
- **æš—å·åŒ–ã‚­ãƒ¼**: ç’°å¢ƒå¤‰æ•°ï¼ˆå°†æ¥çš„ã«Secret Managerï¼‰
- **é€šä¿¡**: HTTPSå¿…é ˆ

### TTLç®¡ç†
- **è‡ªå‹•æœŸé™åˆ‡ã‚Œ**: 24æ™‚é–“å¾Œã«APIã‚­ãƒ¼ç„¡åŠ¹åŒ–
- **å®šæœŸå‰Šé™¤**: Cloud Schedulerã§æœŸé™åˆ‡ã‚Œã‚­ãƒ¼å‰Šé™¤
- **æ‰‹å‹•å‰Šé™¤**: éƒ¨å±‹å‰Šé™¤æ™‚ã«APIã‚­ãƒ¼ã‚‚å‰Šé™¤

---

## ğŸ’» ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…è©³ç´° (Next.js, React)

*   **ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«**:
    * `meeting-mate-app/src/app/room/page.tsx` (ä¼šè­°ãƒ«ãƒ¼ãƒ ãƒšãƒ¼ã‚¸)
    * `meeting-mate-app/src/app/page.tsx` (ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸)
    * `meeting-mate-app/src/app/create/page.tsx` (ãƒ«ãƒ¼ãƒ ä½œæˆãƒšãƒ¼ã‚¸)
    * `meeting-mate-app/src/app/join/page.tsx` (ãƒ«ãƒ¼ãƒ å‚åŠ ãƒšãƒ¼ã‚¸)
    * `meeting-mate-app/src/app/board.tsx` (ä¼šè­°ãƒœãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ)
*   **ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼**:
    *   åˆæœŸãƒ‡ãƒ¼ã‚¿ã¯ã€ãƒ«ãƒ¼ãƒ å‚åŠ æ™‚ã«Firebase Realtime Databaseã®JavaScript SDKã‚’ç›´æ¥åˆ©ç”¨ã—ã¦å–å¾—ã•ã‚Œã¾ã™ã€‚
    *   `useRoomData` ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã€Firebase Realtime Databaseã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å–å¾—ãƒ»ç›£è¦–ã—ã¾ã™ã€‚
    *   ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—é€ä¿¡ã™ã‚‹ã¨ã€`useBackendApi` ãƒ•ãƒƒã‚¯ã® `callBackendApi` é–¢æ•°ãŒãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã¾ã™ã€‚
    *   `callBackendApi` é–¢æ•°ãŒã€æœ€æ–°ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸1ä»¶ã‚’ `LLMMessage` å½¢å¼ã§FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (`/invoke`) ã«é€ä¿¡ã—ã¾ã™ã€‚ã“ã‚Œã¯ä¸»ã«LLMã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã¨ã€LLMã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿æ›´æ–°ã®ãƒˆãƒªã‚¬ãƒ¼ã‚’ç›®çš„ã¨ã—ã¾ã™ã€‚
    *   **Firebase Realtime Databaseã®ãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã‚‹ã¨ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼ã‚’é€šã˜ã¦ãã®å¤‰æ›´ã‚’æ¤œçŸ¥ã—ã€å¯¾å¿œã™ã‚‹Reactã®stateï¼ˆ`tasks`, `participants`, `notes`, `currentAgenda`, `overviewDiagram` ãªã©ï¼‰ã‚’æ›´æ–°ã—ã€UIã«å³åº§ã«åæ˜ ã—ã¾ã™ã€‚**
    *   å„æƒ…å ±ãƒ‘ãƒãƒ«ã¯ã€å¯¾å¿œã™ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯è¡¨ç¤ºã•ã‚Œãšã€ãƒ‡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚Œã‚‹ã¨å‹•çš„ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ–°è¦ãƒ«ãƒ¼ãƒ ä½œæˆæ™‚ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ ã®å†…å®¹ãŒå°‘ãªã„ãŸã‚ã€åˆæœŸè¡¨ç¤ºã•ã‚Œã‚‹ãƒ‘ãƒãƒ«ã‚‚å°‘ãªããªã‚Šã¾ã™ã€‚
    *   ãƒ‘ãƒãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹éš›ã«ã¯ã€æ›´æ–°ãŒã‚ã£ãŸãƒ‘ãƒãƒ«ã®ã¿ã«ãƒ›ãƒ¯ã‚¤ãƒˆã‚¢ã‚¦ãƒˆã™ã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒé©ç”¨ã•ã‚Œã€è¦–è¦šçš„ã«ç›®ç«‹ã¤ã‚ˆã†ã«ã—ã¾ã™ã€‚
*   **ç™ºè¨€è€…**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ«ãƒ¼ãƒ ã«å‚åŠ ã™ã‚‹éš›ã«èªè¨¼æƒ…å ±ã‹ã‚‰å–å¾—ã—ãŸè¡¨ç¤ºå (`speakerName`) ãŒä½¿ç”¨ã•ã‚Œã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ä¿¡ã•ã‚Œã¾ã™ã€‚
*   **ãƒ‡ãƒãƒƒã‚°ç”¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—**: ä»¥å‰ä½¿ç”¨ã—ã¦ã„ãŸ `alert` ã«ã‚ˆã‚‹ãƒ‡ãƒãƒƒã‚°ç”¨ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¯å‰Šé™¤ã•ã‚Œã€æƒ…å ±ã¯ä¸»ã«ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
*   **éŸ³å£°å…¥åŠ›ãƒœã‚¿ãƒ³**: ã€Œãƒ‡ãƒãƒƒã‚°ç”¨å…¥åŠ›ã€ã¨ã—ã¦è¨­å®šã•ã‚Œã¦ã„ãŸã€ŒéŸ³å£°å…¥åŠ›é–‹å§‹ã€ãƒœã‚¿ãƒ³ã¯ã€æ­£å¼æ©Ÿèƒ½ã¨ã—ã¦UIã«é…ç½®ã•ã‚Œã¾ã™ã€‚

### éŸ³å£°èªè­˜æ©Ÿèƒ½ã®ç¾çŠ¶

*   ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (`meeting-mate-app/src/app/room/page.tsx`) ã«ã€ãƒ–ãƒ©ã‚¦ã‚¶æ¨™æº–ã® Web Speech API ã‚’åˆ©ç”¨ã—ãŸéŸ³å£°èªè­˜æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚`useSpeechRecognition` ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã€éŸ³å£°èªè­˜ã®çŠ¶æ…‹ç®¡ç†ã¨å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚
*   **iOSãƒ‡ãƒã‚¤ã‚¹ã§ã®å‹•ä½œã«ã¤ã„ã¦**: iOSã®Safariãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯Web Speech APIã®ã‚µãƒãƒ¼ãƒˆãŒé™å®šçš„ã§ã‚ã‚‹ãŸã‚ã€éŸ³å£°èªè­˜æ©Ÿèƒ½ãŒæœŸå¾…é€šã‚Šã«å‹•ä½œã—ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®åˆ¶ç´„ã«ã‚ˆã‚‹ã‚‚ã®ã§ã‚ã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã§ã®ç›´æ¥çš„ãªè§£æ±ºã¯é›£ã—ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ› ï¸ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨å®Ÿè¡Œ

### å¿…è¦ãªã‚‚ã®
*   Node.js, npm
*   Python 3.x, pip
*   Google Cloudãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨Vertex AI APIã®æœ‰åŠ¹åŒ–ã€èªè¨¼è¨­å®šï¼ˆ`GOOGLE_APPLICATION_CREDENTIALS` ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãªã©ï¼‰ã€‚

### ç’°å¢ƒå¤‰æ•°
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’è¨­å®šã—ã¾ã™ã€‚`.env.example` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

```bash
cp .env.example .env
```

è¨­å®šãŒå¿…è¦ãªä¸»è¦ãªç’°å¢ƒå¤‰æ•°ï¼š
- `PROJECT_ID`: ã‚ãªãŸã®GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID
- `REGION`: GCPãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆä¾‹: us-central1ï¼‰
- `LLM_MODEL`: ä½¿ç”¨ã™ã‚‹Vertex AIãƒ¢ãƒ‡ãƒ«åï¼ˆä¾‹: gemini-2.5-flashï¼‰
- `FIREBASE_DATABASE_URL`: Firebase Realtime Databaseã®URL
- `GOOGLE_APPLICATION_CREDENTIALS`: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹
- `ENCRYPTION_KEY`: APIã‚­ãƒ¼æš—å·åŒ–ç”¨ã®Fernetã‚­ãƒ¼
- `GEMINI_API_KEY`: Gemini APIã‚­ãƒ¼
- `NEXT_PUBLIC_FIREBASE_CONFIG`: Firebaseè¨­å®šï¼ˆJSONå½¢å¼ï¼‰
- `NEXT_PUBLIC_BACKEND_API_URL`: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®URLï¼ˆé–‹ç™ºæ™‚ã¯ http://127.0.0.1:8000ï¼‰

**é‡è¦**: `NEXT_PUBLIC_BACKEND_API_URL` ç’°å¢ƒå¤‰æ•°ã¯ä¸è¦ã«ãªã‚Šã¾ã—ãŸã€‚APIå‘¼ã³å‡ºã—ã¯ç›¸å¯¾URLï¼ˆä¾‹: `/invoke`ï¼‰ã§è¡Œã‚ã‚Œã€ç’°å¢ƒã«å¿œã˜ã¦è‡ªå‹•çš„ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. å‰ææ¡ä»¶
- Node.js (v18ä»¥ä¸Š)
- Python 3.8ä»¥ä¸Š
- Google Cloudã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

### 2. GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š
1. [Google Cloud Console](https://console.cloud.google.com/)ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
2. ä»¥ä¸‹ã®APIã‚’æœ‰åŠ¹åŒ–ï¼š
   - Vertex AI API
   - Firebase Realtime Database API
   - Cloud Run APIï¼ˆæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ï¼‰
3. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®æ¨©é™ã‚’ä»˜ä¸ï¼š
   - Firebase Admin SDK Administrator Service Agent
   - Vertex AI User
4. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### 3. Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š
1. [Firebase Console](https://console.firebase.google.com/)ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆï¼ˆæ—¢å­˜ã®GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨å¯èƒ½ï¼‰
2. Realtime Databaseã‚’æœ‰åŠ¹åŒ–
3. Firebaseè¨­å®šã‚’å–å¾—ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š > å…¨èˆ¬ > ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªï¼‰

### 4. ç’°å¢ƒè¨­å®š
1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ï¼š
```bash
git clone <repository-url>
cd <repository-name>
```

2. ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š
```bash
cp .env.example .env
```

3. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã€ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‚’è¨­å®š

4. Firebaseè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š
```bash
cd meeting-mate-app
cp .firebaserc.example .firebaserc
cp firebase.json.example firebase.json
```

5. Firebaseè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã€ã‚ãªãŸã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæƒ…å ±ã‚’è¨­å®š

### 5. æš—å·åŒ–ã‚­ãƒ¼ã®ç”Ÿæˆ
`ENCRYPTION_KEY` ã¯ã€APIã‚­ãƒ¼ã‚’æš—å·åŒ–ãƒ»å¾©å·åŒ–ã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚ä»¥ä¸‹ã®Pythonã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š

```python
from cryptography.fernet import Fernet
key = Fernet.generate_key()
print(key.decode()) # ã“ã®å‡ºåŠ›ã‚’.envãƒ•ã‚¡ã‚¤ãƒ«ã®ENCRYPTION_KEYã«è¨­å®š
```

## ğŸƒâ€â™‚ï¸ å®Ÿè¡Œæ‰‹é †

### 6. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ (FastAPI)

1. `meeting-mate-app/server` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼š
```bash
cd meeting-mate-app/server
```

2. å¿…è¦ãªPythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š
```bash
pip install -r requirements.txt
```

3. ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼š
```bash
python main.py
```
ã‚µãƒ¼ãƒãƒ¼ã¯ `http://localhost:8000` ã§èµ·å‹•ã—ã¾ã™ã€‚

### 7. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ (Next.js)

1. `meeting-mate-app` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ï¼ˆåˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼‰ï¼š
```bash
cd meeting-mate-app
```

2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š
```bash
npm install
```

3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼š
```bash
npm run dev
```
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ `http://localhost:3000` ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

### Terraform (ã‚¤ãƒ³ãƒ•ãƒ©æ§‹ç¯‰)
Terraformé–¢é€£ã®ãƒ•ã‚¡ã‚¤ãƒ« (`environments/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª) ã«ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿æ§‹é€  (Firebase Realtime Database)

ä¸»è¦ãªãƒ‡ãƒ¼ã‚¿ã¯ Firebase Realtime Database ã® `rooms/{roomId}/` ä»¥ä¸‹ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚
è©³ç´°ãªã‚¹ã‚­ãƒ¼ãƒã¯ä¸Šè¨˜ã® [Firebase Realtime Database ã‚¹ã‚­ãƒ¼ãƒæ¡ˆ](#firebase-realtime-database-ã‚¹ã‚­ãƒ¼ãƒæ¡ˆ) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

ç‰¹ã«ãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ `rooms/{roomId}/transcript` ã«ä»¥ä¸‹ã®å½¢å¼ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚
```json
{
  "text": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¾ãŸã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç™ºè¨€å†…å®¹",
  "user": "ç™ºè¨€è€…åã¾ãŸã¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè­˜åˆ¥å­ (ä¾‹: 'ç”°ä¸­', 'agent:NotesGeneratorAgent')",
  "timestamp": "ç™ºè¨€ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— (ISO 8601å½¢å¼)"
}
```


#### ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚° + Firebase Hosting Rewritesï¼ˆæ¡ç”¨ï¼‰
- `/room/[roomId]` ã‚’ `/room.html` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§URLã‹ã‚‰roomIdã‚’å–å¾—
- æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§å®Ÿç¾å¯èƒ½
- ç¾åœ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„

**å®Ÿè£…æ–¹é‡**:
1. `/room/[roomId]/page.tsx` ã‚’ `/room/page.tsx` ã«ç§»å‹•
2. Firebase Hosting rewritesã®è¨­å®šèª¿æ•´
3. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰roomIdã‚’æŠ½å‡º

## å‹•ä½œç¢ºèªãƒ‡ãƒã‚¤ã‚¹
### Mac
- Chrome: å¯
- Vivaldi: ä¸å¯
### Android
- Chrome: å¯
### iPad
- Chrome: ä¸å¯
- Safari: å¯

## è£œè¨˜
- ã“ã®Devcontainerç’°å¢ƒã¯ä¸‹è¨˜ã‚’ãƒ™ãƒ¼ã‚¹ã«ä½œæˆã—ã¾ã—ãŸã€‚æ„Ÿè¬ç”³ã—ä¸Šã’ã¾ã™ã€‚
  - https://github.com/a5chin/terraform-template.git
- ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯[ç¬¬2å› AI Agent Hackathon with Google Cloud](https://zenn.dev/hackathons/google-cloud-japan-ai-hackathon-vol2?tab=overview) ã¸ã®æå‡ºç‰©ã¨ã—ã¦ä½œæˆã—ã¾ã—ãŸã€‚
